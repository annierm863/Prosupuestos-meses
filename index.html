<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Presupuesto Personal - VersiÃ³n Ultimate</title>
    <link rel="stylesheet" href="./styles.css" />
    <style>
      /* ============= ESTILOS CRÃTICOS DEL SIDEBAR - PRIORIDAD MÃXIMA ============= */
      #sidebar.sidebar,
      .sidebar#sidebar {
        width: 280px !important;
        background: linear-gradient(180deg, #2d3748 0%, #1a202c 100%) !important;
        color: white !important;
        position: fixed !important;
        left: 0 !important;
        top: 0 !important;
        height: 100vh !important;
        overflow-y: auto !important;
        z-index: 1000 !important;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1) !important;
      }
      
      /* Forzar color blanco en todos los elementos del sidebar */
      #sidebar *,
      .sidebar *,
      #sidebar.sidebar * {
        color: white !important;
      }
      
      /* Estilos para enlaces */
      #sidebar a,
      #sidebar a:link,
      #sidebar a:visited,
      .sidebar a,
      .sidebar a:link,
      .sidebar a:visited {
        color: rgba(255, 255, 255, 0.8) !important;
        text-decoration: none !important;
      }
      
      #sidebar a:hover,
      .sidebar a:hover {
        color: white !important;
        text-decoration: none !important;
        background: rgba(255, 255, 255, 0.1) !important;
      }
      
      /* Item activo */
      #sidebar .nav-item.active,
      #sidebar .nav-item.active *,
      .sidebar .nav-item.active,
      .sidebar .nav-item.active * {
        color: white !important;
        background: rgba(102, 126, 234, 0.2) !important;
        border-left-color: #667eea !important;
      }
      
      /* Headers de categorÃ­as */
      #sidebar .nav-category-header,
      #sidebar .nav-category-header *,
      .sidebar .nav-category-header,
      .sidebar .nav-category-header * {
        color: rgba(255, 255, 255, 0.9) !important;
      }
      
      /* Textos de navegaciÃ³n */
      #sidebar .nav-text,
      .sidebar .nav-text {
        color: inherit !important;
      }
      
      /* Todos los elementos de texto */
      #sidebar h3,
      #sidebar h4,
      #sidebar p,
      #sidebar span,
      #sidebar div,
      .sidebar h3,
      .sidebar h4,
      .sidebar p,
      .sidebar span,
      .sidebar div {
        color: white !important;
      }
      
      /* Iconos */
      #sidebar .nav-icon,
      .sidebar .nav-icon {
        color: inherit !important;
      }
      
      /* Header del sidebar */
      #sidebar .sidebar-header,
      .sidebar .sidebar-header {
        padding: 20px !important;
        background: rgba(0, 0, 0, 0.2) !important;
        display: flex !important;
        justify-content: space-between !important;
        align-items: center !important;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
      }
      
      #sidebar .sidebar-header h3,
      .sidebar .sidebar-header h3 {
        margin: 0 !important;
        font-size: 18px !important;
        font-weight: 600 !important;
        color: white !important;
      }
      
      /* NavegaciÃ³n */
      #sidebar .sidebar-nav,
      .sidebar .sidebar-nav {
        padding: 10px 0 !important;
      }
      
      /* SubmenÃºs - Asegurar que funcionen */
      #sidebar .nav-submenu,
      .sidebar .nav-submenu {
        max-height: 0 !important;
        overflow: hidden !important;
        transition: max-height 0.3s ease !important;
        background: rgba(0, 0, 0, 0.2) !important;
      }
      
      #sidebar .nav-category-header.active + .nav-submenu,
      #sidebar .nav-submenu.active,
      .sidebar .nav-category-header.active + .nav-submenu,
      .sidebar .nav-submenu.active {
        max-height: 500px !important;
      }
    </style>
    <!-- Chart.js para grÃ¡ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- jsPDF para exportaciÃ³n a PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  </head>
  <body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
      <div class="loading-content">
        <div class="loading-spinner"></div>
        <p>Cargando datos...</p>
      </div>
    </div>

    <!-- Pantalla de autenticaciÃ³n -->
    <div id="authScreen" class="auth-container">
      <div class="auth-box">
        <h2>ğŸ’° Presupuesto Personal</h2>
        <div id="authMessage"></div>
        <div class="form-group">
          <label>Email:</label>
          <input type="email" id="authEmail" placeholder="tu@email.com" />
        </div>
        <div class="form-group">
          <label>ContraseÃ±a:</label>
          <input type="password" id="authPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
        </div>
        <button onclick="login()">Iniciar SesiÃ³n</button>
      </div>
    </div>

    <!-- AplicaciÃ³n principal -->
    <div id="mainApp" class="container" style="display: none">
      <!-- MenÃº Lateral (Sidebar) -->
      <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <h3>ğŸ“Š MenÃº</h3>
          <button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()">
            <span>â˜°</span>
          </button>
        </div>
        
        <nav class="sidebar-nav">
          <!-- Dashboard -->
          <a href="#" class="nav-item active" onclick="showTab('dashboard', this); return false;">
            <span class="nav-icon">ğŸ“Š</span>
            <span class="nav-text">Dashboard</span>
          </a>

          <!-- GestiÃ³n Semanal -->
          <div class="nav-category" style="margin-top: 5px;">
            <div class="nav-category-header" onclick="toggleCategory(this)" style="display: flex; align-items: center; padding: 12px 20px; color: rgba(255, 255, 255, 0.9) !important; cursor: pointer; transition: all 0.3s; font-weight: 600; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px; background: transparent; border: none; width: 100%; text-align: left;">
              <span class="nav-icon" style="font-size: 20px; margin-right: 12px; width: 24px; text-align: center; color: rgba(255, 255, 255, 0.9) !important;">ğŸ“…</span>
              <span class="nav-text" style="flex: 1; font-size: 13px; color: rgba(255, 255, 255, 0.9) !important;">GestiÃ³n Semanal</span>
              <span class="nav-arrow" style="margin-left: auto; font-size: 12px; transition: transform 0.3s; color: rgba(255, 255, 255, 0.9) !important;">â–¼</span>
            </div>
            <div class="nav-submenu">
              <a href="#" class="nav-item" onclick="showTab('weeks', this); return false;" style="display: flex; align-items: center; padding: 12px 20px 12px 50px; color: rgba(255, 255, 255, 0.8) !important; text-decoration: none !important; transition: all 0.3s; border-left: 3px solid transparent; cursor: pointer; background: transparent; width: 100%; text-align: left; font-size: 13px;">
                <span class="nav-icon" style="font-size: 16px; margin-right: 12px; width: 24px; text-align: center; color: rgba(255, 255, 255, 0.8) !important;">ğŸ“†</span>
                <span class="nav-text" style="flex: 1; font-size: 13px; color: rgba(255, 255, 255, 0.8) !important;">Semanas</span>
              </a>
              <a href="#" class="nav-item" onclick="showTab('income', this); return false;" style="display: flex; align-items: center; padding: 12px 20px 12px 50px; color: rgba(255, 255, 255, 0.8) !important; text-decoration: none !important; transition: all 0.3s; border-left: 3px solid transparent; cursor: pointer; background: transparent; width: 100%; text-align: left; font-size: 13px;">
                <span class="nav-icon" style="font-size: 16px; margin-right: 12px; width: 24px; text-align: center; color: rgba(255, 255, 255, 0.8) !important;">ğŸ’µ</span>
                <span class="nav-text" style="flex: 1; font-size: 13px; color: rgba(255, 255, 255, 0.8) !important;">Ingresos</span>
              </a>
              <a href="#" class="nav-item" onclick="showTab('expenses', this); return false;" style="display: flex; align-items: center; padding: 12px 20px 12px 50px; color: rgba(255, 255, 255, 0.8) !important; text-decoration: none !important; transition: all 0.3s; border-left: 3px solid transparent; cursor: pointer; background: transparent; width: 100%; text-align: left; font-size: 13px;">
                <span class="nav-icon" style="font-size: 16px; margin-right: 12px; width: 24px; text-align: center; color: rgba(255, 255, 255, 0.8) !important;">ğŸ’¸</span>
                <span class="nav-text" style="flex: 1; font-size: 13px; color: rgba(255, 255, 255, 0.8) !important;">Gastos</span>
              </a>
              <a href="#" class="nav-item" onclick="showTab('work-expenses', this); return false;" style="display: flex; align-items: center; padding: 12px 20px 12px 50px; color: rgba(255, 255, 255, 0.8) !important; text-decoration: none !important; transition: all 0.3s; border-left: 3px solid transparent; cursor: pointer; background: transparent; width: 100%; text-align: left; font-size: 13px;">
                <span class="nav-icon" style="font-size: 16px; margin-right: 12px; width: 24px; text-align: center; color: rgba(255, 255, 255, 0.8) !important;">ğŸš—</span>
                <span class="nav-text" style="flex: 1; font-size: 13px; color: rgba(255, 255, 255, 0.8) !important;">Gastos Trabajo</span>
              </a>
            </div>
          </div>

          <!-- AnÃ¡lisis -->
          <div class="nav-category">
            <div class="nav-category-header" onclick="toggleCategory(this)">
              <span class="nav-icon">ğŸ“ˆ</span>
              <span class="nav-text">AnÃ¡lisis</span>
              <span class="nav-arrow">â–¼</span>
            </div>
            <div class="nav-submenu">
              <a href="#" class="nav-item" onclick="showTab('monthly', this); return false;">
                <span class="nav-icon">ğŸ“Š</span>
                <span class="nav-text">Resumen Mensual</span>
              </a>
              <a href="#" class="nav-item" onclick="showTab('trends', this); return false;">
                <span class="nav-icon">ğŸ“‰</span>
                <span class="nav-text">Tendencias</span>
              </a>
            </div>
          </div>

          <!-- PlanificaciÃ³n -->
          <div class="nav-category">
            <div class="nav-category-header" onclick="toggleCategory(this)">
              <span class="nav-icon">ğŸ¯</span>
              <span class="nav-text">PlanificaciÃ³n</span>
              <span class="nav-arrow">â–¼</span>
            </div>
            <div class="nav-submenu">
              <a href="#" class="nav-item" onclick="showTab('goals', this); return false;">
                <span class="nav-icon">ğŸ¯</span>
                <span class="nav-text">Metas</span>
              </a>
              <a href="#" class="nav-item" onclick="showTab('budgets', this); return false;">
                <span class="nav-icon">ğŸ“‹</span>
                <span class="nav-text">Presupuestos</span>
              </a>
            </div>
          </div>

          <!-- Patrimonio -->
          <div class="nav-category">
            <div class="nav-category-header" onclick="toggleCategory(this)">
              <span class="nav-icon">ğŸ’°</span>
              <span class="nav-text">Patrimonio</span>
              <span class="nav-arrow">â–¼</span>
            </div>
            <div class="nav-submenu">
              <a href="#" class="nav-item" onclick="showTab('networth', this); return false;">
                <span class="nav-icon">ğŸ’</span>
                <span class="nav-text">Patrimonio Neto</span>
              </a>
              <a href="#" class="nav-item" onclick="showTab('investments', this); return false;">
                <span class="nav-icon">ğŸ“Š</span>
                <span class="nav-text">Inversiones</span>
              </a>
            </div>
          </div>

          <!-- Libertad Financiera -->
          <div class="nav-category">
            <div class="nav-category-header" onclick="toggleCategory(this)">
              <span class="nav-icon">ğŸš€</span>
              <span class="nav-text">Libertad Financiera</span>
              <span class="nav-arrow">â–¼</span>
            </div>
            <div class="nav-submenu">
              <a href="#" class="nav-item" onclick="showTab('freedom', this); return false;">
                <span class="nav-icon">ğŸš€</span>
                <span class="nav-text">Calculadora</span>
              </a>
              <a href="#" class="nav-item" onclick="showTab('debts', this); return false;">
                <span class="nav-icon">ğŸ’³</span>
                <span class="nav-text">Deudas</span>
              </a>
            </div>
          </div>
        </nav>
      </div>

      <!-- Overlay para mÃ³vil -->
      <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

      <div class="main-content" id="mainContent">
        <div class="header">
          <button class="mobile-menu-btn" onclick="toggleSidebar()">â˜°</button>
          <h1>ğŸ’° Control de Presupuesto Personal</h1>
          <div class="user-info">
            <span id="userEmail"></span>
            <br />
            <button class="logout-btn" onclick="logout()">Cerrar SesiÃ³n</button>
          </div>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="section active">
          <h2>Dashboard General</h2>
          <div id="weekInfo" class="alert alert-info"></div>

          <div class="financial-health" id="financialHealth">
            <h3 style="margin-bottom: 15px">ğŸ“Š Salud Financiera</h3>
            <div id="healthIndicators"></div>
          </div>

          <div class="dashboard-grid" id="dashboardCards"></div>

          <!-- Panel de Plan Semanal (Nuevo) -->
          <div id="weeklyPlanPanel"></div>

          <!-- SecciÃ³n Separada: Control de Gastos de Trabajo (Uber) -->
          <div id="workExpensesSection" style="display: none; margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 15px; border-left: 5px solid #8b5cf6;">
            <h3 style="color: #8b5cf6; margin-bottom: 15px;">ğŸš— Control de Gastos de Trabajo (Uber) - Separado del Presupuesto</h3>
            <p style="color: #666; font-size: 14px; margin-bottom: 15px;">Esta secciÃ³n muestra los gastos relacionados con tu trabajo en Uber. Estos gastos NO se incluyen en el cÃ¡lculo del presupuesto semanal.</p>
            <div id="workExpensesDashboard" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
              <!-- Se llenarÃ¡ dinÃ¡micamente -->
            </div>
          </div>

          <!-- GrÃ¡ficos -->
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
            <div class="chart-container">
              <canvas id="dashboardChart"></canvas>
            </div>
            <div class="chart-container">
              <canvas id="expensesChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Semanas -->
        <div id="weeks" class="section">
          <h2>GestiÃ³n de Semanas</h2>

          <div class="week-selector">
            <h3>Crear Nueva Semana</h3>
            <div class="form-group">
              <label>Nombre de la Semana:</label>
              <input
                type="text"
                id="weekName"
                placeholder="Ej: Semana 1 - Noviembre"
              />
            </div>
            <div class="form-group">
              <label>Fecha Inicio:</label>
              <input type="date" id="weekStartDate" />
            </div>
            <div class="form-group">
              <label>Fecha Fin:</label>
              <input type="date" id="weekEndDate" />
            </div>
            <button onclick="createWeek()">â• Crear Semana</button>
          </div>

          <h3>Semanas Activas</h3>
          <div id="weeksList"></div>
        </div>

        <!-- Ingresos -->
        <div id="income" class="section">
          <h2>Registro de Ingresos</h2>

          <div
            style="
              background: #f8f9fa;
              padding: 20px;
              border-radius: 10px;
              margin-bottom: 20px;
            "
          >
            <h3>Agregar Ingreso</h3>
            <div class="form-group">
              <label>Tipo de Ingreso:</label>
              <select id="incomeType" onchange="toggleIncomeCategory()">
                <option value="Salario">Salario</option>
                <option value="Freelance">Freelance</option>
                <option value="Inversiones">Inversiones</option>
                <option value="Otros">Otros</option>
              </select>
            </div>
            <div class="form-group" id="incomeCategoryGroup">
              <label>DescripciÃ³n:</label>
              <input
                type="text"
                id="incomeDescription"
                placeholder="Describe el ingreso"
              />
            </div>
            <div class="form-group">
              <label>Monto:</label>
              <input
                type="number"
                id="incomeAmount"
                placeholder="0.00"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label>Fecha:</label>
              <input type="date" id="incomeDate" />
            </div>
            <button onclick="addIncome()">ğŸ’µ Guardar Ingreso</button>
            <button
              id="cancelEditIncome"
              style="display: none"
              onclick="cancelEditIncome()"
              class="btn-danger"
            >
              âŒ Cancelar
            </button>
          </div>

          <h3>Lista de Ingresos</h3>
          <div id="incomeList"></div>
        </div>

        <!-- Gastos -->
        <div id="expenses" class="section">
          <h2>Registro de Gastos</h2>

          <div class="sub-tabs">
            <button class="sub-tab active" onclick="showSubTab('programmed', this)">
              ğŸ“‹ Gastos Programados
            </button>
            <button class="sub-tab" onclick="showSubTab('unprogrammed', this)">
              âš¡ Gastos No Programados
            </button>
          </div>

          <!-- Gastos Programados -->
          <div id="programmed" class="sub-section active">
            <div
              style="
                background: #f8f9fa;
                padding: 20px;
                border-radius: 10px;
                margin-bottom: 20px;
              "
            >
              <h3>Agregar Gasto Programado</h3>
              <div class="form-group">
                <label>DescripciÃ³n:</label>
                <input
                  type="text"
                  id="programmedDescription"
                  placeholder="Describe el gasto"
                />
              </div>
              <div class="form-group">
                <label>Monto:</label>
                <input
                  type="number"
                  id="programmedAmount"
                  placeholder="0.00"
                  step="0.01"
                />
              </div>
              <div class="form-group">
                <label>CategorÃ­a:</label>
                <select id="programmedCategory">
                  <option value="Comida">Comida</option>
                  <option value="Transporte">Transporte</option>
                  <option value="Salud">Salud</option>
                  <option value="Servicios">Servicios</option>
                  <option value="Entretenimiento">Entretenimiento</option>
                  <option value="EducaciÃ³n">EducaciÃ³n</option>
                  <option value="Otros">Otros</option>
                </select>
              </div>
              <div class="form-group">
                <label>Fecha:</label>
                <input type="date" id="programmedDate" />
              </div>
              <button onclick="addProgrammedExpense()">
                ğŸ’¸ Guardar Gasto Programado
              </button>
              <button
                id="cancelEditProgrammed"
                style="display: none"
                onclick="cancelEditProgrammed()"
                class="btn-danger"
              >
                âŒ Cancelar
              </button>
            </div>

            <h3>Lista de Gastos Programados</h3>
            <div id="programmedList"></div>
          </div>

          <!-- Gastos No Programados -->
          <div id="unprogrammed" class="sub-section">
            <div
              style="
                background: #f8f9fa;
                padding: 20px;
                border-radius: 10px;
                margin-bottom: 20px;
              "
            >
              <h3>Agregar Gasto No Programado</h3>
              <div class="form-group">
                <label>DescripciÃ³n:</label>
                <input
                  type="text"
                  id="unprogrammedDescription"
                  placeholder="Describe el gasto"
                />
              </div>
              <div class="form-group">
                <label>Monto:</label>
                <input
                  type="number"
                  id="unprogrammedAmount"
                  placeholder="0.00"
                  step="0.01"
                />
              </div>
              <div class="form-group">
                <label>CategorÃ­a:</label>
                <select id="unprogrammedCategory">
                  <option value="Comida">Comida</option>
                  <option value="Transporte">Transporte</option>
                  <option value="Salud">Salud</option>
                  <option value="Servicios">Servicios</option>
                  <option value="Entretenimiento">Entretenimiento</option>
                  <option value="EducaciÃ³n">EducaciÃ³n</option>
                  <option value="Emergencia">Emergencia</option>
                  <option value="Otros">Otros</option>
                </select>
              </div>
              <div class="form-group">
                <label>Comentario (opcional):</label>
                <textarea
                  id="unprogrammedComment"
                  placeholder="Notas adicionales..."
                ></textarea>
              </div>
              <div class="form-group">
                <label>Fecha:</label>
                <input type="date" id="unprogrammedDate" />
              </div>
              <button onclick="addUnprogrammedExpense()">
                âš¡ Guardar Gasto No Programado
              </button>
              <button
                id="cancelEditUnprogrammed"
                style="display: none"
                onclick="cancelEditUnprogrammed()"
                class="btn-danger"
              >
                âŒ Cancelar
              </button>
            </div>

            <h3>Lista de Gastos No Programados</h3>
            <div id="unprogrammedList"></div>
          </div>
        </div>

        <!-- Gastos de Trabajo -->
        <div id="work-expenses" class="section">
          <h2>Gastos de Trabajo en la Calle</h2>

          <div
            style="
              background: #f8f9fa;
              padding: 20px;
              border-radius: 10px;
              margin-bottom: 20px;
            "
          >
            <h3>Agregar Gasto de Trabajo</h3>
            <div class="form-group">
              <label>Tipo:</label>
              <select id="workType">
                <option value="Gasolina">â›½ Gasolina</option>
                <option value="Comida">ğŸ” Comida</option>
                <option value="Servicios">ğŸ”§ Servicios</option>
                <option value="Mantenimiento">ğŸ› ï¸ Mantenimiento</option>
                <option value="Reparaciones">ğŸ”¨ Reparaciones</option>
                <option value="Otros">ğŸ“¦ Otros</option>
              </select>
            </div>
            <div class="form-group">
              <label>Monto:</label>
              <input
                type="number"
                id="workAmount"
                placeholder="0.00"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label>DescripciÃ³n:</label>
              <input
                type="text"
                id="workDescription"
                placeholder="Detalles..."
              />
            </div>
            <div class="form-group">
              <label>Fecha:</label>
              <input type="date" id="workDate" />
            </div>
            <button onclick="addWorkExpense()">
              ğŸš— Guardar Gasto de Trabajo
            </button>
            <button
              id="cancelEditWork"
              style="display: none"
              onclick="cancelEditWork()"
              class="btn-danger"
            >
              âŒ Cancelar
            </button>
          </div>

          <h3>Lista de Gastos de Trabajo</h3>
          <div id="workList"></div>

          <!-- AnÃ¡lisis de Gastos de Trabajo -->
          <div style="margin-top: 30px; background: #f8f9fa; padding: 20px; border-radius: 15px;">
            <h3>ğŸ“Š AnÃ¡lisis de Gastos de Trabajo</h3>
            <p style="color: #666; font-size: 14px; margin-bottom: 20px;">
              AnÃ¡lisis completo e independiente de tus gastos de trabajo (semanal y mensual)
            </p>

            <!-- Resumen Semanal -->
            <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
              <h4 style="color: #8b5cf6; margin-bottom: 15px;">ğŸ“… Resumen Semanal</h4>
              <div id="workWeeklySummary" class="dashboard-grid"></div>
            </div>

            <!-- Resumen Mensual -->
            <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
              <h4 style="color: #8b5cf6; margin-bottom: 15px;">ğŸ“† Resumen Mensual</h4>
              <div class="form-group" style="margin-bottom: 15px;">
                <label>Seleccionar Mes:</label>
                <input type="month" id="workMonthSelector" onchange="loadWorkMonthlyAnalysis()" />
              </div>
              <div id="workMonthlySummary" class="dashboard-grid"></div>
            </div>

            <!-- Gastos por CategorÃ­a -->
            <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
              <h4 style="color: #8b5cf6; margin-bottom: 15px;">ğŸ“Š Gastos por CategorÃ­a</h4>
              <div class="form-group" style="margin-bottom: 15px;">
                <label>PerÃ­odo:</label>
                <select id="workCategoryPeriod" onchange="loadWorkCategoryAnalysis()">
                  <option value="week">Semana Actual</option>
                  <option value="month">Mes Actual</option>
                </select>
              </div>
              <div id="workCategorySummary"></div>
            </div>

            <!-- GrÃ¡fico de Gastos -->
            <div style="background: white; padding: 20px; border-radius: 10px;">
              <h4 style="color: #8b5cf6; margin-bottom: 15px;">ğŸ“ˆ EvoluciÃ³n de Gastos</h4>
              <div class="chart-container">
                <canvas id="workExpensesChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Resumen Mensual -->
        <div id="monthly" class="section">
          <h2>Resumen Mensual</h2>

          <div class="month-selector">
            <h3>Selecciona un Mes</h3>
            <div class="month-grid" id="monthGrid"></div>
          </div>

          <div id="monthlyDetails" style="display: none">
            <h3>Detalles del Mes: <span id="selectedMonth"></span></h3>

            <div class="dashboard-grid" id="monthlyCards"></div>

            <div style="margin: 20px 0">
              <button onclick="exportMonthlyPDF()" class="btn-secondary">
                ğŸ“„ Exportar a PDF
              </button>
              <button onclick="exportMonthlyCSV()" class="btn-success">
                ğŸ“Š Exportar a CSV
              </button>
            </div>

            <h3>Semanas del Mes</h3>
            <div class="week-grid" id="monthlyWeeks"></div>
          </div>
        </div>

        <!-- Metas de Ahorro -->
        <div id="goals" class="section">
          <h2>ğŸ¯ Metas de Ahorro</h2>

          <div
            style="
              background: #f8f9fa;
              padding: 20px;
              border-radius: 10px;
              margin-bottom: 20px;
            "
          >
            <h3>Crear Nueva Meta</h3>
            <div class="form-group">
              <label>Nombre de la Meta:</label>
              <input
                type="text"
                id="goalName"
                placeholder="Ej: Fondo de Emergencia"
              />
            </div>
            <div class="form-group">
              <label>Monto Objetivo:</label>
              <input
                type="number"
                id="goalTarget"
                placeholder="0.00"
                step="0.01"
              />
            </div>
            <div class="form-group">
              <label>Fecha LÃ­mite:</label>
              <input type="date" id="goalDeadline" />
            </div>
            <button onclick="createGoal()">ğŸ¯ Crear Meta</button>
          </div>

          <h3>Mis Metas Activas</h3>
          <div id="goalsList"></div>
        </div>

        <!-- Patrimonio Neto -->
        <div id="networth" class="section">
          <h2>ğŸ’° Patrimonio Neto</h2>
          <div class="alert alert-info">
            <strong>Patrimonio Neto = Activos - Pasivos</strong><br>
            Tu patrimonio neto es la medida real de tu riqueza y progreso hacia la libertad financiera.
          </div>

          <div class="dashboard-grid" id="networthCards"></div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
            <!-- Activos -->
            <div style="background: #f8f9fa; padding: 20px; border-radius: 15px;">
              <h3 style="color: #4ade80; margin-bottom: 15px;">ğŸ’µ Activos</h3>
              <div style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                <h4>Agregar Activo</h4>
                <div class="form-group">
                  <label>Tipo:</label>
                  <select id="assetType">
                    <option value="Efectivo">ğŸ’µ Efectivo</option>
                    <option value="Cuenta Bancaria">ğŸ¦ Cuenta Bancaria</option>
                    <option value="InversiÃ³n">ğŸ“ˆ InversiÃ³n</option>
                    <option value="Propiedad">ğŸ  Propiedad</option>
                    <option value="VehÃ­culo">ğŸš— VehÃ­culo</option>
                    <option value="Otro">ğŸ“¦ Otro</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Nombre/DescripciÃ³n:</label>
                  <input type="text" id="assetName" placeholder="Ej: Cuenta de Ahorros" />
                </div>
                <div class="form-group">
                  <label>Valor Actual:</label>
                  <input type="number" id="assetValue" placeholder="0.00" step="0.01" />
                </div>
                <button onclick="addAsset()">â• Agregar Activo</button>
              </div>
              <div id="assetsList"></div>
            </div>

            <!-- Pasivos -->
            <div style="background: #f8f9fa; padding: 20px; border-radius: 15px;">
              <h3 style="color: #ef4444; margin-bottom: 15px;">ğŸ’³ Pasivos (Deudas)</h3>
              <div style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                <h4>Agregar Pasivo</h4>
                <div class="form-group">
                  <label>Tipo:</label>
                  <select id="liabilityType">
                    <option value="Tarjeta de CrÃ©dito">ğŸ’³ Tarjeta de CrÃ©dito</option>
                    <option value="PrÃ©stamo Personal">ğŸ“‹ PrÃ©stamo Personal</option>
                    <option value="Hipoteca">ğŸ  Hipoteca</option>
                    <option value="PrÃ©stamo de Auto">ğŸš— PrÃ©stamo de Auto</option>
                    <option value="Otro">ğŸ“¦ Otro</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Nombre:</label>
                  <input type="text" id="liabilityName" placeholder="Ej: Tarjeta Visa" />
                </div>
                <div class="form-group">
                  <label>Monto Total:</label>
                  <input type="number" id="liabilityAmount" placeholder="0.00" step="0.01" />
                </div>
                <div class="form-group">
                  <label>Tasa de InterÃ©s (% anual):</label>
                  <input type="number" id="liabilityInterest" placeholder="0.00" step="0.01" />
                </div>
                <div class="form-group">
                  <label>Pago MÃ­nimo Mensual:</label>
                  <input type="number" id="liabilityMinPayment" placeholder="0.00" step="0.01" />
                </div>
                <button onclick="addLiability()">â• Agregar Pasivo</button>
              </div>
              <div id="liabilitiesList"></div>
            </div>
          </div>

          <!-- GrÃ¡fico de EvoluciÃ³n -->
          <div style="margin-top: 30px;">
            <h3>ğŸ“ˆ EvoluciÃ³n del Patrimonio Neto</h3>
            <div class="chart-container">
              <canvas id="networthChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Libertad Financiera -->
        <div id="freedom" class="section">
          <h2>ğŸš€ Calculadora de Libertad Financiera</h2>
          <div class="alert alert-info">
            La libertad financiera se alcanza cuando tus ingresos pasivos cubren todos tus gastos. 
            Usamos la <strong>Regla del 4%</strong>: necesitas 25 veces tus gastos anuales.
          </div>

          <div class="dashboard-grid" id="freedomCards"></div>

          <div style="background: #f8f9fa; padding: 20px; border-radius: 15px; margin-top: 20px;">
            <h3>ğŸ“Š Calculadora</h3>
            <div class="form-group">
              <label>Gastos Mensuales Necesarios (para mantener tu estilo de vida):</label>
              <input type="number" id="monthlyExpenses" placeholder="0.00" step="0.01" />
              <small style="color: #666;">Ingresa cuÃ¡nto necesitas mensualmente para vivir</small>
            </div>
            <div class="form-group">
              <label>Edad Actual:</label>
              <input type="number" id="currentAge" placeholder="30" />
            </div>
            <div class="form-group">
              <label>Edad Deseada para Libertad Financiera:</label>
              <input type="number" id="targetAge" placeholder="50" />
            </div>
            <button onclick="calculateFreedom()">ğŸ§® Calcular Libertad Financiera</button>
          </div>

          <div id="freedomResults" style="margin-top: 20px;"></div>

          <div style="background: #f8f9fa; padding: 20px; border-radius: 15px; margin-top: 20px;">
            <h3>ğŸ¯ Simulador</h3>
            <p>Â¿QuÃ© pasarÃ­a si aumentas tu ahorro mensual?</p>
            <div class="form-group">
              <label>Ahorro Mensual Adicional:</label>
              <input type="number" id="extraSavings" placeholder="0.00" step="0.01" />
            </div>
            <button onclick="simulateFreedom()">ğŸ“Š Simular</button>
            <div id="simulationResults" style="margin-top: 15px;"></div>
          </div>
        </div>

        <!-- Deudas -->
        <div id="debts" class="section">
          <h2>ğŸ’³ GestiÃ³n de Deudas</h2>
          <div class="alert alert-warning">
            Las deudas impiden tu libertad financiera. Usa estrategias como la <strong>Bola de Nieve</strong> 
            (pagar la mÃ¡s pequeÃ±a primero) o <strong>Avalancha</strong> (pagar la de mayor interÃ©s primero).
          </div>

          <div class="dashboard-grid" id="debtsCards"></div>

          <!-- Formulario para Agregar Deuda -->
          <div style="background: #f8f9fa; padding: 20px; border-radius: 15px; margin-top: 20px; margin-bottom: 20px;">
            <h3>â• Agregar Nueva Deuda</h3>
            <p style="color: #666; margin-bottom: 15px; font-size: 14px;">
              Registra todas tus deudas para llevar un control completo y crear un plan de pago efectivo.
            </p>
            <div class="form-group">
              <label>Tipo de Deuda:</label>
              <select id="debtType" onchange="toggleCreditCardFields()">
                <option value="Tarjeta de CrÃ©dito">ğŸ’³ Tarjeta de CrÃ©dito</option>
                <option value="PrÃ©stamo Personal">ğŸ“‹ PrÃ©stamo Personal</option>
                <option value="Hipoteca">ğŸ  Hipoteca</option>
                <option value="PrÃ©stamo de Auto">ğŸš— PrÃ©stamo de Auto</option>
                <option value="PrÃ©stamo Estudiantil">ğŸ“ PrÃ©stamo Estudiantil</option>
                <option value="Otro">ğŸ“¦ Otro</option>
              </select>
            </div>
            <div class="form-group">
              <label>Nombre/DescripciÃ³n:</label>
              <input type="text" id="debtName" placeholder="Ej: Bank of America, Citi Bank, Tarjeta Visa" />
            </div>
            <div class="form-group">
              <label>Propietario:</label>
              <select id="debtOwner">
                <option value="Yo">ğŸ‘¤ Yo</option>
                <option value="Esposa">ğŸ‘© Esposa</option>
                <option value="Ambos">ğŸ‘¥ Ambos</option>
              </select>
              <small style="color: #666;">Selecciona quiÃ©n es responsable de esta deuda</small>
            </div>
            <div class="form-group">
              <label>Monto Total de la Deuda:</label>
              <input type="number" id="debtAmount" placeholder="0.00" step="0.01" />
            </div>
            <div class="form-group">
              <label>Tasa de InterÃ©s (% anual):</label>
              <input type="number" id="debtInterest" placeholder="0.00" step="0.01" />
              <small style="color: #666;">Ejemplo: 18.5 para 18.5% anual</small>
            </div>
            <div class="form-group">
              <label>Pago MÃ­nimo Mensual:</label>
              <input type="number" id="debtMinPayment" placeholder="0.00" step="0.01" />
            </div>
            <!-- Campos adicionales para tarjetas de crÃ©dito -->
            <div id="creditCardFields" style="display: none;">
              <div class="form-group">
                <label>Fecha de Cierre de Ciclo (dÃ­a del mes):</label>
                <input type="number" id="debtClosingDay" placeholder="Ej: 15" min="1" max="31" />
                <small style="color: #666;">DÃ­a del mes en que cierra el ciclo (1-31)</small>
              </div>
              <div class="form-group">
                <label>Fecha de Pago (dÃ­a del mes):</label>
                <input type="number" id="debtPaymentDay" placeholder="Ej: 25" min="1" max="31" />
                <small style="color: #666;">DÃ­a del mes en que debes pagar (1-31)</small>
              </div>
              <div class="form-group">
                <label>Â¿Tiene 0% de interÃ©s?</label>
                <select id="debtHasZeroInterest" onchange="toggleZeroInterestFields()">
                  <option value="no">No</option>
                  <option value="yes">SÃ­</option>
                </select>
              </div>
              <div id="zeroInterestFields" style="display: none;">
                <div class="form-group">
                  <label>Fecha de Caducidad del 0% de InterÃ©s:</label>
                  <input type="date" id="debtZeroInterestExpiry" />
                  <small style="color: #666;">Fecha en que caduca la promociÃ³n de 0%</small>
                </div>
              </div>
            </div>
            <button onclick="addDebt()">â• Agregar Deuda</button>
          </div>

          <!-- Estrategia de Pago -->
          <div style="background: #f8f9fa; padding: 20px; border-radius: 15px; margin-top: 20px;">
            <h3>ğŸ“‹ Estrategia de Pago Recomendada</h3>
            <div class="form-group">
              <label>Seleccionar Estrategia:</label>
              <select id="debtStrategy" onchange="updateDebtStrategy()">
                <option value="snowball">â„ï¸ Bola de Nieve (Menor monto primero)</option>
                <option value="avalanche">ğŸ”ï¸ Avalancha (Mayor interÃ©s primero)</option>
              </select>
            </div>
            <div id="debtPlan"></div>
          </div>

          <!-- Lista de Deudas -->
          <div style="margin-top: 30px;">
            <h3>ğŸ“Š Mis Deudas Registradas</h3>
            <p style="color: #666; margin-bottom: 15px; font-size: 14px;">
              AquÃ­ puedes ver todas tus deudas, hacer seguimiento de pagos y actualizar el monto pendiente.
            </p>
            <div id="debtsList"></div>
          </div>
        </div>

        <!-- Inversiones -->
        <div id="investments" class="section">
          <h2>ğŸ“Š Seguimiento de Inversiones</h2>
          <div class="alert alert-info">
            Las inversiones son clave para la libertad financiera. Haz que tu dinero trabaje para ti.
          </div>

          <div class="dashboard-grid" id="investmentsCards"></div>

          <div style="background: #f8f9fa; padding: 20px; border-radius: 15px; margin-top: 20px;">
            <h3>Agregar InversiÃ³n</h3>
            <div class="form-group">
              <label>Tipo:</label>
              <select id="investmentType">
                <option value="Acciones">ğŸ“ˆ Acciones</option>
                <option value="Fondos">ğŸ’° Fondos Mutuos</option>
                <option value="Cripto">â‚¿ Criptomonedas</option>
                <option value="Bienes RaÃ­ces">ğŸ  Bienes RaÃ­ces</option>
                <option value="Otro">ğŸ“¦ Otro</option>
              </select>
            </div>
            <div class="form-group">
              <label>Nombre:</label>
              <input type="text" id="investmentName" placeholder="Ej: AAPL, Bitcoin, etc." />
            </div>
            <div class="form-group">
              <label>Monto Invertido:</label>
              <input type="number" id="investmentAmount" placeholder="0.00" step="0.01" />
            </div>
            <div class="form-group">
              <label>Valor Actual:</label>
              <input type="number" id="investmentCurrentValue" placeholder="0.00" step="0.01" />
            </div>
            <div class="form-group">
              <label>Fecha de InversiÃ³n:</label>
              <input type="date" id="investmentDate" />
            </div>
            <button onclick="addInvestment()">â• Agregar InversiÃ³n</button>
          </div>

          <h3 style="margin-top: 20px;">Mis Inversiones</h3>
          <div id="investmentsList"></div>

          <div style="margin-top: 30px;">
            <h3>ğŸ“ˆ Rendimiento de Inversiones</h3>
            <div class="chart-container">
              <canvas id="investmentsChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Presupuestos por CategorÃ­a -->
        <div id="budgets" class="section">
          <h2>ğŸ“‹ Presupuestos por CategorÃ­a</h2>
          <div class="alert alert-info">
            Establece lÃ­mites mensuales por categorÃ­a para tener control total de tus gastos.
          </div>

          <div class="dashboard-grid" id="budgetsCards"></div>

          <div style="background: #f8f9fa; padding: 20px; border-radius: 15px; margin-top: 20px;">
            <h3>Crear Presupuesto Mensual</h3>
            <div class="form-group">
              <label>CategorÃ­a:</label>
              <select id="budgetCategory">
                <option value="Comida">ğŸ” Comida</option>
                <option value="Transporte">ğŸš— Transporte</option>
                <option value="Salud">ğŸ¥ Salud</option>
                <option value="Servicios">ğŸ’¡ Servicios</option>
                <option value="Entretenimiento">ğŸ® Entretenimiento</option>
                <option value="EducaciÃ³n">ğŸ“š EducaciÃ³n</option>
                <option value="Otros">ğŸ“¦ Otros</option>
              </select>
            </div>
            <div class="form-group">
              <label>LÃ­mite Mensual:</label>
              <input type="number" id="budgetLimit" placeholder="0.00" step="0.01" />
            </div>
            <div class="form-group">
              <label>Mes:</label>
              <input type="month" id="budgetMonth" />
            </div>
            <button onclick="createBudget()">â• Crear Presupuesto</button>
          </div>

          <h3 style="margin-top: 20px;">Presupuestos Activos</h3>
          <div id="budgetsList"></div>

          <div style="margin-top: 30px;">
            <h3>ğŸ“Š Presupuesto vs Gasto Real</h3>
            <div class="chart-container">
              <canvas id="budgetsChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Tendencias y AnÃ¡lisis -->
        <div id="trends" class="section">
          <h2>ğŸ“‰ AnÃ¡lisis de Tendencias</h2>
          <div class="alert alert-info">
            Analiza tus patrones de gasto, tendencias y proyecciones para tomar mejores decisiones financieras.
          </div>

          <div class="dashboard-grid" id="trendsCards"></div>

          <div style="margin-top: 20px;">
            <h3>ğŸ“ˆ Tendencias de Ingresos y Gastos (Ãšltimos 6 Meses)</h3>
            <div class="chart-container">
              <canvas id="trendsChart"></canvas>
            </div>
          </div>

          <div style="margin-top: 30px;">
            <h3>ğŸ“Š AnÃ¡lisis por CategorÃ­a</h3>
            <div class="chart-container">
              <canvas id="categoryTrendsChart"></canvas>
            </div>
          </div>

          <div style="margin-top: 30px; background: #f8f9fa; padding: 20px; border-radius: 15px;">
            <h3>ğŸ” Insights y Recomendaciones</h3>
            <div id="insights"></div>
          </div>

          <div style="margin-top: 30px; background: #f8f9fa; padding: 20px; border-radius: 15px;">
            <h3>ğŸ“… Comparativa Mes a Mes</h3>
            <div id="monthComparison"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para detalles -->
    <div id="detailModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle"></h3>
          <button class="close-modal" onclick="closeModal()">Ã—</button>
        </div>
        <div id="modalBody"></div>
      </div>
    </div>

    <!-- Modal para detalles de semana -->
    <div id="weekDetailModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="weekModalTitle"></h3>
          <button class="close-modal" onclick="closeWeekModal()">Ã—</button>
        </div>
        <div id="weekModalBody"></div>
      </div>
    </div>

    <!-- Modal genÃ©rico para confirmaciones -->
    <div id="confirmModal" class="modal">
      <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header">
          <h3 id="confirmModalTitle">âš ï¸ Confirmar AcciÃ³n</h3>
          <button class="close-modal" onclick="closeConfirmModal()">Ã—</button>
        </div>
        <div id="confirmModalBody" style="padding: 20px;">
          <p id="confirmModalMessage" style="color: #333; font-size: 16px; margin: 0 0 20px 0;"></p>
          <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button onclick="closeConfirmModal()" style="flex: 1; padding: 12px; background: #e5e7eb; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Cancelar</button>
            <button onclick="confirmModalAction()" style="flex: 1; padding: 12px; background: #ef4444; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">âœ… Confirmar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal genÃ©rico para inputs (reemplazar prompt) -->
    <div id="inputModal" class="modal">
      <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header">
          <h3 id="inputModalTitle">ğŸ“ Ingresar InformaciÃ³n</h3>
          <button class="close-modal" onclick="closeInputModal()">Ã—</button>
        </div>
        <div id="inputModalBody" style="padding: 20px;">
          <p id="inputModalMessage" style="color: #333; font-size: 14px; margin: 0 0 15px 0;"></p>
          <div class="form-group">
            <label id="inputModalLabel"></label>
            <input type="text" id="inputModalInput" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px;" />
          </div>
          <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button onclick="closeInputModal()" style="flex: 1; padding: 12px; background: #e5e7eb; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Cancelar</button>
            <button onclick="confirmInputModal()" style="flex: 1; padding: 12px; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">âœ… Aceptar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para fecha (especial para createDebtGoal) -->
    <div id="dateInputModal" class="modal">
      <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header">
          <h3 id="dateInputModalTitle">ğŸ“… Seleccionar Fecha</h3>
          <button class="close-modal" onclick="closeDateInputModal()">Ã—</button>
        </div>
        <div id="dateInputModalBody" style="padding: 20px;">
          <p id="dateInputModalMessage" style="color: #333; font-size: 14px; margin: 0 0 15px 0;"></p>
          <div class="form-group">
            <label id="dateInputModalLabel">Fecha LÃ­mite:</label>
            <input type="date" id="dateInputModalInput" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px;" />
          </div>
          <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button onclick="closeDateInputModal()" style="flex: 1; padding: 12px; background: #e5e7eb; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Cancelar</button>
            <button onclick="confirmDateInputModal()" style="flex: 1; padding: 12px; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">âœ… Aceptar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para registrar pago -->
    <div id="paymentModal" class="modal">
      <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header">
          <h3 id="paymentModalTitle">ğŸ’° Registrar Pago</h3>
          <button class="close-modal" onclick="closePaymentModal()">Ã—</button>
        </div>
        <div id="paymentModalBody" style="padding: 20px;">
          <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
            <p style="color: #666; margin: 0; font-size: 14px;"><strong>Tarjeta:</strong> <span id="paymentDebtName" style="color: #333; font-weight: 600;"></span></p>
            <p style="color: #666; margin: 5px 0 0 0; font-size: 14px;"><strong>Monto Actual:</strong> <span id="paymentCurrentAmount" style="color: #ef4444; font-weight: bold; font-size: 18px;"></span></p>
          </div>
          <div class="form-group">
            <label>Monto del Pago:</label>
            <input type="number" id="paymentAmount" placeholder="0.00" step="0.01" min="0.01" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px;" />
            <small style="color: #666;">Ingresa el monto que vas a pagar</small>
          </div>
          <div class="form-group">
            <label>Fecha del Pago:</label>
            <input type="date" id="paymentDate" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px;" />
          </div>
          <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button onclick="closePaymentModal()" style="flex: 1; padding: 12px; background: #e5e7eb; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Cancelar</button>
            <button onclick="confirmPayment()" style="flex: 1; padding: 12px; background: #10b981; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">âœ… Registrar Pago</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para actualizar deuda completa -->
    <div id="updateDebtModal" class="modal">
      <div class="modal-content" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
        <div class="modal-header">
          <h3 id="updateDebtModalTitle">âœï¸ Actualizar Deuda</h3>
          <button class="close-modal" onclick="closeUpdateDebtModal()">Ã—</button>
        </div>
        <div id="updateDebtModalBody" style="padding: 20px;">
          <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
            <p style="color: #666; margin: 0; font-size: 14px;"><strong>Edita todos los campos que necesites corregir o completar</strong></p>
          </div>
          
          <div class="form-group">
            <label>Tipo de Deuda:</label>
            <select id="updateDebtType" onchange="toggleUpdateCreditCardFields()">
              <option value="Tarjeta de CrÃ©dito">ğŸ’³ Tarjeta de CrÃ©dito</option>
              <option value="PrÃ©stamo Personal">ğŸ“‹ PrÃ©stamo Personal</option>
              <option value="Hipoteca">ğŸ  Hipoteca</option>
              <option value="PrÃ©stamo de Auto">ğŸš— PrÃ©stamo de Auto</option>
              <option value="PrÃ©stamo Estudiantil">ğŸ“ PrÃ©stamo Estudiantil</option>
              <option value="Otro">ğŸ“¦ Otro</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Nombre/DescripciÃ³n:</label>
            <input type="text" id="updateDebtName" placeholder="Ej: Bank of America, Citi Bank, Tarjeta Visa" />
          </div>
          
          <div class="form-group">
            <label>Propietario:</label>
            <select id="updateDebtOwner">
              <option value="Yo">ğŸ‘¤ Yo</option>
              <option value="Esposa">ğŸ‘© Esposa</option>
              <option value="Ambos">ğŸ‘¥ Ambos</option>
            </select>
            <small style="color: #666;">Selecciona quiÃ©n es responsable de esta deuda</small>
          </div>
          
          <div class="form-group">
            <label>Monto Total de la Deuda:</label>
            <input type="number" id="updateDebtAmount" placeholder="0.00" step="0.01" min="0" />
          </div>
          
          <div class="form-group">
            <label>Tasa de InterÃ©s (% anual):</label>
            <input type="number" id="updateDebtInterest" placeholder="0.00" step="0.01" />
            <small style="color: #666;">Ejemplo: 18.5 para 18.5% anual</small>
          </div>
          
          <div class="form-group">
            <label>Pago MÃ­nimo Mensual:</label>
            <input type="number" id="updateDebtMinPayment" placeholder="0.00" step="0.01" />
          </div>
          
          <!-- Campos adicionales para tarjetas de crÃ©dito -->
          <div id="updateCreditCardFields" style="display: none;">
            <div class="form-group">
              <label>Fecha de Cierre de Ciclo (dÃ­a del mes):</label>
              <input type="number" id="updateDebtClosingDay" placeholder="Ej: 15" min="1" max="31" />
              <small style="color: #666;">DÃ­a del mes en que cierra el ciclo (1-31)</small>
            </div>
            <div class="form-group">
              <label>Fecha de Pago (dÃ­a del mes):</label>
              <input type="number" id="updateDebtPaymentDay" placeholder="Ej: 25" min="1" max="31" />
              <small style="color: #666;">DÃ­a del mes en que debes pagar (1-31)</small>
            </div>
            <div class="form-group">
              <label>Â¿Tiene 0% de interÃ©s?</label>
              <select id="updateDebtHasZeroInterest" onchange="toggleUpdateZeroInterestFields()">
                <option value="no">No</option>
                <option value="yes">SÃ­</option>
              </select>
            </div>
            <div id="updateZeroInterestFields" style="display: none;">
              <div class="form-group">
                <label>Fecha de Caducidad del 0% de InterÃ©s:</label>
                <input type="date" id="updateDebtZeroInterestExpiry" />
                <small style="color: #666;">Fecha en que caduca la promociÃ³n de 0%</small>
              </div>
            </div>
          </div>
          
          <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button onclick="closeUpdateDebtModal()" style="flex: 1; padding: 12px; background: #e5e7eb; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Cancelar</button>
            <button onclick="confirmUpdateDebt()" style="flex: 1; padding: 12px; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">âœ… Actualizar Deuda</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para editar meta completa -->
    <div id="editGoalModal" class="modal">
      <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
          <h3 id="editGoalModalTitle">âœï¸ Editar Meta</h3>
          <button class="close-modal" onclick="closeEditGoalModal()">Ã—</button>
        </div>
        <div id="editGoalModalBody" style="padding: 20px;">
          <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
            <p style="color: #666; margin: 0; font-size: 14px;"><strong>Edita todos los campos que necesites:</strong></p>
          </div>
          
          <div class="form-group">
            <label>Nombre de la Meta:</label>
            <input type="text" id="editGoalName" placeholder="Ej: Fondo de Emergencia" />
          </div>
          
          <div class="form-group">
            <label>Monto Objetivo:</label>
            <input type="number" id="editGoalTarget" placeholder="0.00" step="0.01" min="0.01" />
          </div>
          
          <div class="form-group">
            <label>Monto Actual:</label>
            <input type="number" id="editGoalCurrent" placeholder="0.00" step="0.01" min="0" />
            <small style="color: #666;">CuÃ¡nto has ahorrado hasta ahora</small>
          </div>
          
          <div class="form-group">
            <label>Fecha LÃ­mite:</label>
            <input type="date" id="editGoalDeadline" />
          </div>
          
          <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button onclick="closeEditGoalModal()" style="flex: 1; padding: 12px; background: #e5e7eb; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Cancelar</button>
            <button onclick="confirmEditGoal()" style="flex: 1; padding: 12px; background: #3b82f6; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">âœ… Guardar Cambios</button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="./app.js"></script>
  </body>
</html>
